<app-header></app-header>
<div class="filter">
  <h2>Filter by</h2>
  <form #addForm="ngForm" (ngSubmit)="findCity(addForm)">
    <label for="city">City (State US only)</label>
    <input
      type="text"
      id="city"
      name="city"
      placeholder="Detroit, MI"
      required
      ngModel
    />
    <label for="country">Country</label>

    <input
      type="text"
      id="country"
      name="country"
      placeholder="United States"
      required
      ngModel
    />
    <button>Submit</button>
  </form>
  <div>
    <p (click)="toggleMoneyFilter()">Money</p>
    <p (click)="togglePollutionFilter()">Pollution</p>
    <p (click)="toggleClimateFilter()">Climate</p>
  </div>

  <div *ngIf="showMoneyFilter" class="popup">
    <i class="fas fa-times" (click)="toggleMoneyButton()"></i>
    <p (click)="setMoneyRange(25)">$</p>
    <p (click)="setMoneyRange(50)">$$</p>
    <p (click)="setMoneyRange(75)">$$$</p>
    <p (click)="setMoneyRange(100)">$$$$</p>
    <p (click)="setMoneyRange(130)">$$$$$</p>
    <button (click)="toggleMoneyButton(); addMoneyFilter()">Submit</button>
  </div>

  <div *ngIf="showPollutionFilter" class="popup">
    <i class="fas fa-times" (click)="togglePollutionButton()"></i>
    <p (click)="setPollutionRange(33)">Safe</p>
    <p (click)="setPollutionRange(66)">Moderate</p>
    <p (click)="setPollutionRange(99)">Unsafe</p>
    <button (click)="togglePollutionButton(); addPollutionFilter()">
      Submit
    </button>
  </div>

  <div *ngIf="showClimateFilter" class="popup">
    <i class="fas fa-times" (click)="toggleClimateButton()"></i>
    <p (click)="setClimateRange(25)">Cold</p>
    <p (click)="setClimateRange(50)">Mild</p>
    <p (click)="setClimateRange(75)">Moderate</p>
    <p (click)="setClimateRange(100)">Hot</p>
    <button (click)="toggleClimateButton(); addClimateFilter()">Submit</button>
  </div>

  <google-map [zoom]="zoom" [center]="center" width="90vw">
    <map-marker
      #markerElem
      *ngFor="let marker of markers"
      [position]="marker.position"
      [label]="marker.label"
      [title]="marker.title"
      [options]="marker.options"
      (mapClick)="openInfo(markerElem, marker.info)"
      (mapDblclick)="dblClick(markerElem, marker.info, marker.position)"
    >
    </map-marker>
    <map-info-window>
      <h3>{{ infoContent?.city }}, {{ infoContent?.country }}</h3>
    </map-info-window>
  </google-map>
  <div *ngFor="let city of popularCities; index as i">
    <div *ngIf="i < 10">
      <p>{{ city.country }}</p>
      <p>{{ city.city_name }}</p>
    </div>
  </div>
</div>
